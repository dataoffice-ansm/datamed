fragment SpecialityFragment on Speciality {
    id
    name
    code
    description
    atc {
        id
        name
        code
    }
    pharmaForm {
        id
        name
    }
    substances {
        ...SubstanceFragment
    }
    dosageIndication
    dosageSubstances {
        id
        code
        name
        dosage
    }
    commercialisationState
    commercialisationType
    repartitionPerGender {
        male {
            value
            valuePercent
        }
        female {
            value
            valuePercent
        }
    }
    repartitionPerAge {
        id
        range
        value
        valuePercent
    }
    publications {
        id
        name
        link
        type {
            id
            name
        }
    }
    icon {
        id
        name
    }
    laboratory {
        id
        name
    }
    exposition {
        id
        consumption
        expositionLevel
    }
    medicalErrors {
        populationRepartition {
            id
            range
            value
            valuePercent
        }
        sideEffectsOriginRepartition {
            with {
                value
                valuePercent
            }
            without {
                value
                valuePercent
            }
        }
        apparitionStepRepartition {
            id
            range
            value
            valuePercent
        }
        natureRepartition {
            id
            range
            value
            valuePercent
        }
    }
    rupturesHistory {
        ruptures {
            id
            num
            name
            active
            date
            cause {
                id
                name
            }
            classification {
                id
                name
            }
        }
        meta {
            count
        }
    }
}

fragment SubstanceFragment on Substance {
    id
    code
    name
    retrieveSpecialities {
        meta {
            count
        }
        specialities {
            id
            code
            name
            description
        }
    }
    repartitionPerGender {
        male {
            value
            valuePercent
        }
        female {
            value
            valuePercent
        }
    }
    repartitionPerAge {
        id
        range
        value
        valuePercent
    }
    repartitionPerNotifier {
        id
        job
        value
        valuePercent
    }
    repartitionPerPathology {
        id
        range
        value
        valuePercent
        htlEffects {
            id
            range
            value
            valuePercent
        }
    }
    totalExposition {
        total
        minYear
        maxYear
    }
    exposition {
        id
        consumption
        expositionLevel
    }
}

query SpecialityIdByCode($cisCode: String!) {
    getSpecialityIdByCode(cisCode: $cisCode)
}

query Speciality($cisCode: String!) {
    getSpeciality(cisCode: $cisCode) {
        ...SpecialityFragment
    }
}

query Specialities {
    getSpecialities {
        meta {
            count
        }
        specialities {
            id
            code
            name
        }
    }
}

query Substance($subCode: String!) {
    getSubstance(subCode: $subCode) {
        ...SubstanceFragment
    }
}

query Substances {
    getSubstances {
        meta {
            count
        }
        substances {
            id
            name
            code
        }
    }
}
